# Создание Триггера

Теперь создайте триггер, который будет вызывать функцию обработки сообщений из очереди, после создания триггер начинает работать через пять минут. Триггер будет брать по одному сообщению и раз в 10 секунд отправлять в функцию:

    yc serverless trigger create message-queue \
    --name ffmpeg \
    --queue $YMQ_QUEUE_ARN \
    --queue-service-account-id $SERVICE_ACCOUNT_FFMPEG_ID \
    --invoke-function-name ffmpeg-converter  \
    --invoke-function-service-account-id $SERVICE_ACCOUNT_FFMPEG_ID \
    --batch-size 1 \
    --batch-cutoff 10s

С этого момента, можем ожидать, что очередь начнёт обрабатываться. Можно пойти и проверить готова ли задача и если готова запросить по URL результат обработки из `Object Storage`. 

Теперь у нас есть функция, которая выполняет функцию API, через которую мы можем ставить задачи в очередь на исполнение. Триггер раз в 10 секунд берет по одному сообщению в очереди и передает функции обработчику. Функция обработчик формирует результат и обновляет данные в базе данных. При этом мы получаем сконвертированные gif-файлы из видео. 

# Удаление Триггера

По завершении лабораторной работы не забудьте удалить, созданный нами триггер `ffmpeg` иначе он будет работать и работать:

    yc serverless trigger delete ffmpeg

Не забудьте удалить или остановить все созданные вами ресурсы.
